{erl_opts, [
  debug_info
  ,{parse_transform, lager_transform}]}.
{deps, [{lager, "3.9.1"}]}.

{plugins, [
  rebar3_hex,
  rebar_mix,
  {rebar3_elixir_compile, ".*", {git, "https://github.com/barrel-db/rebar3_elixir_compile.git", {branch, "master"}}}
]}.

{deps, [
   {bigbrother, {git, "https://github.com/filipevarjao/bigbrother.git", {tag, "main"}}}
]}.

{provider_hooks, [
  {pre, [{compile, {ex, compile}}]}
  {pre,  [{compile, {mix, find_elixir_libs}}]},
  {post, [{compile, {mix, consolidate_protocols}}]}
]}.

{elixir_opts, 
[
  {env, dev}
]
}.

{shell, [
    {config, "config/sys.config"},
    {apps, [sentinel]}
]}.

{relx, [{release, {sentinel, "0.1.0"},
         [sentinel,
          sasl]},

        {mode, dev},

        %% automatically picked up if the files
        %% exist but can be set manually, which
        %% is required if the names aren't exactly
        %% sys.config and vm.args
        {sys_config, "./config/sys.config"},
        {vm_args, "./config/vm.args"}

        %% the .src form of the configuration files do
        %% not require setting RELX_REPLACE_OS_VARS
        %% {sys_config_src, "./config/sys.config.src"},
        %% {vm_args_src, "./config/vm.args.src"}
]}.

{profiles, [{prod, [{relx,
                     [%% prod is the default mode when prod
                      %% profile is used, so does not have
                      %% to be explicitly included like this
                      {mode, prod}

                      %% use minimal mode to exclude ERTS
                      %% {mode, minimal}
                     ]
            }]}]}.